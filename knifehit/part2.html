<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Phaser3-框架</title>
	<script src="../js/phaser.js"></script>
	<style type="text/css">       
        body{
            background: #000000;
            padding: 0px;
            margin: 0px;
        }
        canvas{
        	display: block;
        	margin: 0;
        	position: absolute;
        	top: 50%;
        	left: 50%;
        	transform: translate(-50%,-50%);
        }
    </style>
</head>
<body>
<script>
var game;
var gameOptions={

	// 设置旋转速度，即每一帧转动的角度
	rotationSpeed: 3, 
	// 刀飞出去的速度, 即一秒中内移动像素
	throwSpeed: 150
}

// 窗口第一次加载...
window.onload = function(){
	// 游戏的参数设置
	var gameConfig={
		type: Phaser.CANVAS,
		width: 750,
		height: 1334,
		backgroundColor: 0x444444,
		scene: [playGame]
	};
	game = new Phaser.Game(gameConfig);
	window.focus();//获得窗口焦点
	resize();//调整窗口
	window.addEventListener("resize",resize,false);
}
class playGame extends Phaser.Scene{

	constructor(){
		super("playGame");
	}
	// 预加载
	preload(){

		// 加载各种资源
		this.load.image("target","assets/target.png");
		this.load.image("knife","assets/knife.png");

	}
	// 游戏开始运行
	create(){

		// 加载刀和圆木
		this.knife = this.add.sprite(game.config.width/2, game.config.height/5*4,"knife");
		this.target = this.add.sprite(game.config.width/2,400,"target");
	}
	// 游戏每一帧执行
	update(){

		//使目标转动起来
		this.target.angle += gameOptions.rotationSpeed;
	}
}


// 按比例调整窗口
function resize() {
    var canvas = document.querySelector("canvas");
    var windowWidth = window.innerWidth;
    var windowHeight = window.innerHeight;
    var windowRatio = windowWidth / windowHeight;
    var gameRatio = game.config.width / game.config.height;
    if(windowRatio < gameRatio){
        canvas.style.width = windowWidth + "px";
        canvas.style.height = (windowWidth / gameRatio) + "px";
    }
    else{
        canvas.style.width = (windowHeight * gameRatio) + "px";
        canvas.style.height = windowHeight + "px";
    }
} 



</script>	
</body>
</html>